plugins {
    id "maven"
    id "java"
    id "application"
    id "eclipse"
    id "idea"
    id 'com.github.johnrengelman.shadow' version '1.2.3'
}

apply plugin: "java"
apply plugin: "maven"
apply plugin: "com.github.johnrengelman.shadow"

repositories {
  jcenter()
}

mainClassName = "Main"

dependencies {
  runtime "org.slf4j:slf4j-simple:1.7.12"
  compile group: 'io.vertx', name: 'vertx-core', version: '3.5.0'
  testCompile 'io.vertx:vertx-unit:3.5.0'
  testCompile 'junit:junit:4.11'
}

task stage {
  //dependsOn installDist
  dependsOn shadowJar
}
shadowJar {
  classifier = 'fat'
  manifest {
    attributes 'Main-Verticle': 'HttpProxyServer'
  }
  mergeServiceFiles {
    include 'META-INF/services/io.vertx.core.spi.VerticleFactory'
  }
}